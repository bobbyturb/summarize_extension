<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è®¾ç½® - AIåŠ©æ‰‹</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 32px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 8px;
      color: #333;
    }

    .subtitle {
      color: #666;
      margin-bottom: 32px;
    }

    .section {
      margin-bottom: 32px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #333;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 8px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
    }

    .help-text {
      font-size: 12px;
      color: #999;
      margin-top: 4px;
    }

    select, input[type="text"], input[type="password"], input[type="url"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #1976d2;
    }

    .service-config {
      padding: 16px;
      background: #f9f9f9;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }

    .btn {
      padding: 10px 24px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary {
      background: #1976d2;
      color: #fff;
    }

    .btn-primary:hover {
      background: #1565c0;
    }

    .btn-secondary {
      background: #f0f0f0;
      color: #666;
      margin-left: 8px;
    }

    .btn-secondary:hover {
      background: #e0e0e0;
    }

    .status-message {
      margin-top: 16px;
      padding: 12px;
      border-radius: 4px;
      display: none;
    }

    .status-message.success {
      background: #d4edda;
      color: #155724;
      display: block;
    }

    .status-message.error {
      background: #f8d7da;
      color: #721c24;
      display: block;
    }

    .buttons {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>AIåŠ©æ‰‹è®¾ç½®</h1>
    <p class="subtitle">é…ç½®AIæœåŠ¡å•†å’ŒAPIå¯†é’¥</p>

    <!-- ä¸­å›½å¤§é™†ç”¨æˆ·æç¤º -->
    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 12px 16px; margin-bottom: 24px; border-radius: 4px;">
      <strong>ğŸŒ ä¸­å›½å¤§é™†ç”¨æˆ·æ³¨æ„ï¼š</strong>
      <p style="margin: 8px 0 0 0; font-size: 13px; line-height: 1.5;">
        å¦‚æœé‡åˆ°è¿æ¥å¤±è´¥ï¼Œæ¨èä½¿ç”¨ <strong>Ollamaï¼ˆæœ¬åœ°AIï¼Œå…è´¹ï¼‰</strong>ï¼Œ
        æˆ–æŸ¥çœ‹ <a href="#" id="openApiGuide" style="color: #1976d2; cursor: pointer;">API é…ç½®æŒ‡å—</a> äº†è§£è¯¦ç»†è§£å†³æ–¹æ¡ˆã€‚
      </p>
    </div>

    <!-- AIæœåŠ¡å•†é€‰æ‹© -->
    <div class="section">
      <h2 class="section-title">AIæœåŠ¡å•†</h2>

      <div class="form-group">
        <label for="aiProvider">é€‰æ‹©AIæœåŠ¡å•†</label>
        <select id="aiProvider">
          <option value="openai">OpenAI (GPT-3.5/GPT-4)</option>
          <option value="anthropic">Anthropic (Claude)</option>
          <option value="gemini">Google Gemini</option>
          <option value="ollama">Ollama (æœ¬åœ°)</option>
          <option value="custom">è‡ªå®šä¹‰API</option>
        </select>
      </div>
    </div>

    <!-- OpenAIé…ç½® -->
    <div class="section service-config" id="openai-config">
      <h3 style="margin-bottom: 16px;">OpenAI é…ç½®</h3>

      <div class="form-group">
        <label for="openai-apiKey">API Key *</label>
        <input type="password" id="openai-apiKey" placeholder="sk-...">
        <p class="help-text">åœ¨ https://platform.openai.com/api-keys è·å–</p>
      </div>

      <div class="form-group">
        <label for="openai-model">æ¨¡å‹</label>
        <select id="openai-model">
          <option value="gpt-3.5-turbo">GPT-3.5 Turbo (æ›´å¿«/ä¾¿å®œ)</option>
          <option value="gpt-4">GPT-4 (æ›´å‡†ç¡®)</option>
          <option value="gpt-4-turbo">GPT-4 Turbo</option>
        </select>
      </div>

      <div class="form-group">
        <label for="openai-baseUrl">API Base URL (å¯é€‰)</label>
        <input type="url" id="openai-baseUrl" placeholder="https://api.openai.com/v1">
        <p class="help-text">ä½¿ç”¨ä»£ç†æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡æ—¶ä¿®æ”¹</p>
      </div>
    </div>

    <!-- Anthropicé…ç½® -->
    <div class="section service-config" id="anthropic-config" style="display: none;">
      <h3 style="margin-bottom: 16px;">Anthropic Claude é…ç½®</h3>

      <div class="form-group">
        <label for="anthropic-apiKey">API Key *</label>
        <input type="password" id="anthropic-apiKey" placeholder="sk-ant-...">
        <p class="help-text">åœ¨ https://console.anthropic.com è·å–</p>
      </div>

      <div class="form-group">
        <label for="anthropic-model">æ¨¡å‹</label>
        <select id="anthropic-model">
          <option value="claude-3-haiku-20240307">Claude 3 Haiku (æœ€å¿«)</option>
          <option value="claude-3-sonnet-20240229">Claude 3 Sonnet (å¹³è¡¡)</option>
          <option value="claude-3-opus-20240229">Claude 3 Opus (æœ€å¼º)</option>
        </select>
      </div>
    </div>

    <!-- Geminié…ç½® -->
    <div class="section service-config" id="gemini-config" style="display: none;">
      <h3 style="margin-bottom: 16px;">Google Gemini é…ç½®</h3>

      <div class="form-group">
        <label for="gemini-apiKey">API Key *</label>
        <input type="password" id="gemini-apiKey" placeholder="AIza...">
        <p class="help-text">åœ¨ https://makersuite.google.com/app/apikey è·å–</p>
      </div>

      <div class="form-group">
        <label for="gemini-model">æ¨¡å‹</label>
        <select id="gemini-model">
          <option value="gemini-pro">Gemini Pro</option>
          <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
        </select>
      </div>
    </div>

    <!-- Ollamaé…ç½® -->
    <div class="section service-config" id="ollama-config" style="display: none;">
      <h3 style="margin-bottom: 16px;">Ollama é…ç½®ï¼ˆæœ¬åœ°AIï¼‰</h3>

      <div style="background: #e7f3ff; padding: 12px; border-radius: 4px; margin-bottom: 16px; font-size: 13px;">
        <strong>ğŸ’¡ é¦–æ¬¡ä½¿ç”¨ Ollamaï¼Ÿ</strong><br>
        1. å®‰è£…ï¼š<code>curl -fsSL https://ollama.com/install.sh | sh</code> (Linux/Mac) æˆ–è®¿é—®
        <a href="https://ollama.com/download" target="_blank" style="color: #1976d2;">ollama.com/download</a> (Windows)<br>
        2. å¯åŠ¨ï¼š<code>ollama serve</code><br>
        3. ä¸‹è½½æ¨¡å‹ï¼š<code>ollama pull qwen2:7b</code> (æ¨èä¸­æ–‡æ¨¡å‹)
      </div>

      <div class="form-group">
        <label for="ollama-baseUrl">OllamaæœåŠ¡åœ°å€ *</label>
        <input type="url" id="ollama-baseUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
        <p class="help-text">ç¡®ä¿OllamaæœåŠ¡å·²åœ¨æœ¬åœ°è¿è¡Œ</p>
      </div>

      <div class="form-group">
        <label for="ollama-model">æ¨¡å‹åç§° *</label>
        <input type="text" id="ollama-model" placeholder="qwen2:7b" value="qwen2:7b">
        <p class="help-text">
          æ¨èæ¨¡å‹ï¼šqwen2:7b (ä¸­æ–‡)ã€llama3.1 (è‹±æ–‡)ã€gemma2:9b (é€šç”¨)<br>
          ä½¿ç”¨ <code>ollama list</code> æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å‹
        </p>
      </div>
    </div>

    <!-- è‡ªå®šä¹‰APIé…ç½® -->
    <div class="section service-config" id="custom-config" style="display: none;">
      <h3 style="margin-bottom: 16px;">è‡ªå®šä¹‰APIé…ç½®</h3>

      <div class="form-group">
        <label for="custom-baseUrl">API Base URL *</label>
        <input type="url" id="custom-baseUrl" placeholder="https://your-api.com/v1">
      </div>

      <div class="form-group">
        <label for="custom-apiKey">API Key</label>
        <input type="password" id="custom-apiKey" placeholder="å¯é€‰">
      </div>

      <div class="form-group">
        <label for="custom-model">æ¨¡å‹åç§° *</label>
        <input type="text" id="custom-model" placeholder="model-name">
      </div>
    </div>

    <!-- æ€»ç»“è®¾ç½® -->
    <div class="section">
      <h2 class="section-title">æ€»ç»“è®¾ç½®</h2>

      <div class="form-group">
        <label for="customSummaryPrompt">è‡ªå®šä¹‰æ€»ç»“æç¤ºè¯</label>
        <textarea id="customSummaryPrompt" rows="6" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; font-family: inherit; resize: vertical;" placeholder="ä¾‹å¦‚ï¼šè¯·ç”¨ç®€æ´çš„è¯­è¨€æ€»ç»“ä»¥ä¸‹å†…å®¹ï¼Œçªå‡ºé‡ç‚¹ä¿¡æ¯..."></textarea>
        <p class="help-text">å½“é€‰æ‹©"è‡ªå®šä¹‰"é•¿åº¦æ—¶å°†ä½¿ç”¨æ­¤æç¤ºè¯ã€‚ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤æç¤ºè¯ã€‚</p>
      </div>
    </div>

    <!-- ä¿å­˜æŒ‰é’® -->
    <div class="buttons">
      <button id="saveBtn" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
      <button id="testBtn" class="btn btn-secondary">æµ‹è¯•è¿æ¥</button>
      <button id="diagnosticBtn" class="btn btn-secondary">è¯Šæ–­å·¥å…·</button>
    </div>

    <div id="statusMessage" class="status-message"></div>
  </div>

  <script src="options.js"></script>
</body>
</html>
